var e=Object.assign;import{defineComponent as t,ref as r,onMounted as a,readonly as n,h as s}from"vue";import p from"chart.js";const o=["beforeInit","afterInit","beforeUpdate","afterUpdate","beforeLayout","afterLayout","beforeDatasetsUpdate","afterDatasetsUpdate","beforeDatasetUpdate","afterDatasetUpdate","beforeRender","afterRender","beforeDraw","afterDraw","beforeDatasetsDraw","afterDatasetsDraw","beforeDatasetDraw","afterDatasetDraw","beforeEvent","afterEvent","resize","destroy"];const u=t({name:"Vue3ChartJs",props:{type:{type:String,required:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]}},emits:o,setup(t,{emit:s}){const u=r(null),d={chart:null,debouncedID:null,plugins:[o.reduce(((t,r)=>{const a=function(e,t=null){return{type:e,chartRef:t,preventDefault(){this._defaultPrevented=!0},isDefaultPrevented(){return!this._defaultPrevented},_defaultPrevented:!1}}(r,u);return e(e({},t),function(e,t){return{[t.type]:()=>(e(t.type,t),t.isDefaultPrevented())}}(s,a))}),{id:"Vue3ChartJsEventHookPlugin"}),...t.plugins],props:e({},t)},f=()=>d.chart?d.chart.update():d.chart=new p(u.value.getContext("2d"),{type:d.props.type,data:d.props.data,options:d.props.options,plugins:d.plugins});return a((()=>f())),{state:n(d),chartRef:u,render:f,resize:()=>d.chart&&d.chart.resize(),update:()=>{d.props=e(e({},d.props),t),d.chart.update()},destroy:()=>{d.chart&&(d.chart.destroy(),d.chart=null)}}},render:()=>s("canvas",{ref:"chartRef"})});u.install=e=>{e.component(u.name,u)};export default u;
