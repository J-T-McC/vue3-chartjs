var e=Object.assign;import{defineComponent as t,ref as r,onMounted as a,h as n}from"vue";import s from"chart.js";const o=["beforeInit","afterInit","beforeUpdate","afterUpdate","beforeLayout","afterLayout","beforeDatasetsUpdate","afterDatasetsUpdate","beforeDatasetUpdate","afterDatasetUpdate","beforeRender","afterRender","beforeDraw","afterDraw","beforeDatasetsDraw","afterDatasetsDraw","beforeDatasetDraw","afterDatasetDraw","beforeEvent","afterEvent","resize","destroy"];const p=t({name:"Vue3ChartJs",props:{type:{type:String,required:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]}},emits:o,setup(t,{emit:n}){const p=r(null),u={chart:null,plugins:[o.reduce(((t,r)=>{const a=function(e,t=null){return{type:e,chartRef:t,preventDefault(){this._defaultPrevented=!0},isDefaultPrevented(){return!this._defaultPrevented},_defaultPrevented:!1}}(r,p);return e(e({},t),function(e,t){return{[t.type]:()=>(e(t.type,t),t.isDefaultPrevented())}}(n,a))}),{id:"Vue3ChartJsEventHookPlugin"}),...t.plugins],props:e({},t)},d=()=>u.chart?u.chart.update():u.chart=new s(p.value.getContext("2d"),{type:u.props.type,data:u.props.data,options:u.props.options,plugins:u.plugins});return a((()=>d())),{chartJSState:u,chartRef:p,render:d,resize:()=>u.chart&&u.chart.resize(),update:(t=750)=>{u.chart.data=e(e({},u.chart.data),u.props.data),u.chart.options=e(e({},u.chart.options),u.props.options),u.chart.update(t)},destroy:()=>{u.chart&&(u.chart.destroy(),u.chart=null)}}},render:()=>n("canvas",{ref:"chartRef"})});p.install=e=>{e.component(p.name,p)};export default p;
