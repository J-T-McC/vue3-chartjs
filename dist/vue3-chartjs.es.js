var e=Object.assign;import{defineComponent as t,ref as a,reactive as r,onMounted as d,onUnmounted as o,h as n}from"vue";import s from"chart.js";const p=["beforeInit","afterInit","beforeUpdate","afterUpdate","beforeLayout","afterLayout","beforeDatasetsUpdate","afterDatasetsUpdate","beforeDatasetUpdate","afterDatasetUpdate","beforeRender","afterRender","beforeDraw","afterDraw","beforeDatasetsDraw","afterDatasetsDraw","beforeDatasetDraw","afterDatasetDraw","beforeEvent","afterEvent","resize","destroy"],u=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),c=p.map((e=>u(e))),f=t({name:"Vue3ChartJs",props:{type:{type:String,required:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]}},emits:c,setup(t,{emit:n}){const c=a(null),f=p.reduce(((t,a)=>{const r={};return r[a]=()=>n(u(a),c),e(e({},t),r)}),{}),i=r({chart:null,debouncedID:null,plugins:[f,...t.plugins]}),l=()=>i.chart&&i.chart.destroy(),b=()=>{l(),i.chart=new s(c.value.getContext("2d"),{type:t.type,data:t.data,options:t.options,plugins:i.plugins})};return d((()=>b())),o((()=>l())),{state:i,chartRef:c,render:b,update:()=>i.chart&&i.chart.update(),destroy:l,debouncedReload:(e,t)=>{i.debouncedID&&window.clearTimeout(i.debouncedID),i.debouncedID=window.setTimeout((()=>e()),t)}}},watch:{"data.data":{handler:function(){return this.debouncedReload((()=>{this.state.chart.data=this.data,this.update()}),500)},deep:!0}},render:()=>n("canvas",{ref:"chartRef"})});f.install=e=>{e.component(f.name,f)};export default f;
